---
import BaseLayout from "../layouts/BaseLayout.astro";
import PostCard from "../components/PostCard.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("posts", ({ data }) =>
  !data.draft && data.category === "Lesson Learned"
)).sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---
<BaseLayout title="Lesson Learned â€” Tech & Trek" description="Short essays and reflections on what stuck.">
  <h1 class="mb-6 text-2xl font-bold">Lesson Learned</h1>
  {posts.length === 0 ? (
    <p class="text-muted">No posts in Lesson Learned yet.</p>
  ) : (
    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
      {posts.map((p) => <PostCard post={p} />)}
    </div>
  )}
</BaseLayout>
